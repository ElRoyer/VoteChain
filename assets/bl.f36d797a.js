import{b as B}from"./node-stdlib-browser.6b0e4e0c.js";var y,a;function L(){if(a)return y;a=1;const{Buffer:l}=B,b=Symbol.for("BufferList");function f(i){if(!(this instanceof f))return new f(i);f._init.call(this,i)}return f._init=function(t){Object.defineProperty(this,b,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},f.prototype._new=function(t){return new f(t)},f.prototype._offset=function(t){if(t===0)return[0,0];let e=0;for(let n=0;n<this._bufs.length;n++){const r=e+this._bufs[n].length;if(t<r||n===this._bufs.length-1)return[n,t-e];e=r}},f.prototype._reverseOffset=function(i){const t=i[0];let e=i[1];for(let n=0;n<t;n++)e+=this._bufs[n].length;return e},f.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},f.prototype.slice=function(t,e){return typeof t=="number"&&t<0&&(t+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,t,e)},f.prototype.copy=function(t,e,n,r){if((typeof n!="number"||n<0)&&(n=0),(typeof r!="number"||r>this.length)&&(r=this.length),n>=this.length||r<=0)return t||l.alloc(0);const s=!!t,h=this._offset(n),c=r-n;let u=c,_=s&&e||0,o=h[1];if(n===0&&r===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:l.concat(this._bufs,this.length);for(let p=0;p<this._bufs.length;p++)this._bufs[p].copy(t,_),_+=this._bufs[p].length;return t}if(u<=this._bufs[h[0]].length-o)return s?this._bufs[h[0]].copy(t,e,o,o+u):this._bufs[h[0]].slice(o,o+u);s||(t=l.allocUnsafe(c));for(let p=h[0];p<this._bufs.length;p++){const g=this._bufs[p].length-o;if(u>g)this._bufs[p].copy(t,_,o),_+=g;else{this._bufs[p].copy(t,_,o,o+u),_+=g;break}u-=g,o&&(o=0)}return t.length>_?t.slice(0,_):t},f.prototype.shallowSlice=function(t,e){if(t=t||0,e=typeof e!="number"?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const n=this._offset(t),r=this._offset(e),s=this._bufs.slice(n[0],r[0]+1);return r[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,r[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)},f.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},f.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;)if(t>=this._bufs[0].length)t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}return this},f.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},f.prototype.append=function(t){if(t==null)return this;if(t.buffer)this._appendBuffer(l.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else typeof t=="number"&&(t=t.toString()),this._appendBuffer(l.from(t));return this},f.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},f.prototype.indexOf=function(i,t,e){if(e===void 0&&typeof t=="string"&&(e=t,t=void 0),typeof i=="function"||Array.isArray(i))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof i=="number"?i=l.from([i]):typeof i=="string"?i=l.from(i,e):this._isBufferList(i)?i=i.slice():Array.isArray(i.buffer)?i=l.from(i.buffer,i.byteOffset,i.byteLength):l.isBuffer(i)||(i=l.from(i)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),i.length===0)return t>this.length?this.length:t;const n=this._offset(t);let r=n[0],s=n[1];for(;r<this._bufs.length;r++){const h=this._bufs[r];for(;s<h.length;)if(h.length-s>=i.length){const u=h.indexOf(i,s);if(u!==-1)return this._reverseOffset([r,u]);s=h.length-i.length+1}else{const u=this._reverseOffset([r,s]);if(this._match(u,i))return u;s++}s=0}return-1},f.prototype._match=function(i,t){if(this.length-i<t.length)return!1;for(let e=0;e<t.length;e++)if(this.get(i+e)!==t[e])return!1;return!0},function(){const i={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in i)(function(e){i[e]===null?f.prototype[e]=function(n,r){return this.slice(n,n+r)[e](0,r)}:f.prototype[e]=function(n=0){return this.slice(n,n+i[e])[e](0)}})(t)}(),f.prototype._isBufferList=function(t){return t instanceof f||f.isBufferList(t)},f.isBufferList=function(t){return t!=null&&t[b]},y=f,y}export{L as r};
